<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Financial & Population & Trip Trends</title>
    <link rel="stylesheet" href="/www/css/style.css" type="text/css">
    <script src="../www/libs/amcharts/amcharts.js" type="text/javascript"></script>
    <script src="../www/libs/amcharts/serial.js" type="text/javascript"></script>

    <script>
        var chart;
        var chartData = [];

        AmCharts.ready(function () {
            // generate some random data first
            generateChartData();

            // SERIAL CHART
            chart = new AmCharts.AmSerialChart();

            chart.dataProvider = chartData;
            chart.categoryField = "date";

            // listen for "dataUpdated" event (fired when chart is inited) and call zoomChart method when it happens
            chart.addListener("dataUpdated", zoomChart);

            chart.synchronizeGrid = true; // this makes all axes grid to be at the same intervals

            // AXES
            // category
            var categoryAxis = chart.categoryAxis;
            categoryAxis.parseDates = true; // as our data is date-based, we set parseDates to true
            categoryAxis.minPeriod = "YYYY"; // our data is yearly, YYYY
            categoryAxis.minorGridEnabled = true;
            categoryAxis.axisColor = "#DADADA";
            categoryAxis.twoLineMode = true;
            categoryAxis.dateFormats = [{
                period: 'fff',
                format: 'JJ:NN:SS'
            }, {
                period: 'ss',
                format: 'JJ:NN:SS'
            }, {
                period: 'mm',
                format: 'JJ:NN'
            }, {
                period: 'hh',
                format: 'JJ:NN'
            }, {
                period: 'DD',
                format: 'DD'
            }, {
                period: 'WW',
                format: 'DD'
            }, {
                period: 'MM',
                format: 'MMM'
            }, {
                period: 'YYYY',
                format: 'YYYY'
            }];

            // first value axis (on the right),  trip_sum
            var valueAxis1 = new AmCharts.ValueAxis();
            valueAxis1.position = "right";
            valueAxis1.axisColor = "#FF6600";
            valueAxis1.axisThickness = 2;
            chart.addValueAxis(valueAxis1);

            // second value axis
            var valueAxis2 = new AmCharts.ValueAxis();
            // valueAxis2.position = "right"; // this line makes the axis to appear on the right
            valueAxis2.offset = 50;
            valueAxis2.axisColor = "#FCD202";
            valueAxis2.gridAlpha = 0;
            valueAxis2.axisThickness = 2;
            chart.addValueAxis(valueAxis2);

            // third value axis (on the left, detached)
            var valueAxis3 = new AmCharts.ValueAxis();
            valueAxis3.offset = 0; // this line makes the axis to appear detached from plot area
            valueAxis3.gridAlpha = 0;
            valueAxis3.axisColor = "#B0DE09";
            valueAxis3.axisThickness = 2;
            chart.addValueAxis(valueAxis3);

            // GRAPHS
            // first graph
            var graph1 = new AmCharts.AmGraph();
            graph1.valueAxis = valueAxis1; // we have to indicate which value axis should be used
            graph1.title = "Trip sum(billion)";
            graph1.valueField = "trip_sum";
            graph1.bullet = "round";
            graph1.hideBulletsCount = 30;
            graph1.bulletBorderThickness = 1;
            chart.addGraph(graph1);

            // second graph
            var graph2 = new AmCharts.AmGraph();
            graph2.valueAxis = valueAxis2; // we have to indicate which value axis should be used
            graph2.title = "GDP(billion $)";
            graph2.valueField = "financial";
            graph2.bullet = "square";
            graph2.hideBulletsCount = 30;
            graph2.bulletBorderThickness = 1;
            chart.addGraph(graph2);

            // third graph
            var graph3 = new AmCharts.AmGraph();
            graph3.valueAxis = valueAxis3; // we have to indicate which value axis should be used
            graph3.title = "Population(million)";
            graph3.valueField = "population";
            graph3.bullet = "triangleUp";
            graph3.hideBulletsCount = 30;
            graph3.bulletBorderThickness = 1;
            chart.addGraph(graph3);

            // CURSOR
            var chartCursor = new AmCharts.ChartCursor();
            chartCursor.cursorAlpha = 0.1;
            chartCursor.fullWidth = true;
            chartCursor.valueLineBalloonEnabled = true;
            chart.addChartCursor(chartCursor);

            // // SCROLLBAR
            // var chartScrollbar = new AmCharts.ChartScrollbar();
            // chart.addChartScrollbar(chartScrollbar);

            // LEGEND
            var legend = new AmCharts.AmLegend();
            legend.marginLeft = 110;
            legend.useGraphSettings = true;
            chart.addLegend(legend);

            // WRITE
            chart.write("chartdiv");
        });

        // generate some random data, quite different range
        function generateChartData() {

            // var firstDate = new Date();
            // firstDate.setDate(firstDate.getDate() - 50);

            var trip_sum = {  //million
                2009: 165.24,
                2010: 162.67,
                2011: 168.91,
                2012: 171.55,
                2013: 168.54,
                2014: 175.12,
                2015: 224.49,
                2016: 277.69,
                2017: 315.65,
                2018: 370.67,
            };
            var financial = {  //billion
                2009: 1277.7,
                2010: 1340.86,
                2011: 1365.8,
                2012: 1439.23,
                2013: 1477.05,
                2014: 1542.76,
                2015: 1618.37,
                2016: 1662.67,
                2017: 1717.71,
                2018: 1737.59,
            };

            var population = {  //million
                2009: 19.5226,
                2010: 19.5777,
                2011: 19.4985,
                2012: 19.5745,
                2013: 19.628,
                2014: 19.6563,
                2015: 19.6614,
                2016: 19.6416,
                2017: 19.5907,
                2018: 19.5422,
            };

            //循环输入年份以及对应数据
            for (var i = 2009; i < 2019; i++) {
                // we create date objects here. In your data, you can have date strings
                // and then set format of your dates using chart.dataDateFormat property,
                // however when possible, use date objects, as this will speed up chart rendering.

                //new一个date，按照我们的要求按年份输入
                var newDate = new Date();
                newDate.setFullYear(i);

                //输入自己的数据
                var sum = trip_sum[i];
                var finan = financial[i];
                var pop = population[i];

                chartData.push({
                    date: newDate,
                    trip_sum: sum,
                    financial: finan,
                    population: pop
                });
            }
        }

        // this method is called when chart is first inited as we listen for "dataUpdated" event
        function zoomChart() {
            // different zoom methods can be used - zoomToIndexes, zoomToDates, zoomToCategoryValues
            chart.zoomToIndexes(10, 20);
        }
    </script>
</head>

<body>
<div id="chartdiv" style="width: 100%; height: 400px;"></div>
</body>

</html>
